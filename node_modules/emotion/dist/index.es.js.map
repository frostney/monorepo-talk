{"version":3,"file":"index.es.js","sources":["../src/sheet.js","../src/index.js"],"sourcesContent":["/*\n\nhigh performance StyleSheet for css-in-js systems\n\n- uses multiple style tags behind the scenes for millions of rules\n- uses `insertRule` for appending in production for *much* faster performance\n- 'polyfills' on server side\n\n// usage\n\nimport StyleSheet from 'glamor/lib/sheet'\nlet styleSheet = new StyleSheet()\n\nstyleSheet.inject()\n- 'injects' the stylesheet into the page (or into memory if on server)\n\nstyleSheet.insert('#box { border: 1px solid red; }')\n- appends a css rule into the stylesheet\n\nstyleSheet.flush()\n- empties the stylesheet of all its contents\n\n*/\n\nfunction sheetForTag(tag) {\n  if (tag.sheet) {\n    return tag.sheet\n  }\n\n  // this weirdness brought to you by firefox\n  for (let i = 0; i < document.styleSheets.length; i++) {\n    if (document.styleSheets[i].ownerNode === tag) {\n      return document.styleSheets[i]\n    }\n  }\n}\n\nfunction makeStyleTag() {\n  let tag = document.createElement('style')\n  tag.type = 'text/css'\n  tag.setAttribute('data-emotion', '')\n  tag.appendChild(document.createTextNode(''))\n  document.head.appendChild(tag)\n  return tag\n}\n\nexport default class StyleSheet {\n  constructor() {\n    this.isBrowser = typeof window !== 'undefined'\n    this.isSpeedy = process.env.NODE_ENV === 'production' // the big drawback here is that the css won't be editable in devtools\n    this.tags = []\n    this.ctr = 0\n  }\n  inject() {\n    if (this.injected) {\n      throw new Error('already injected!')\n    }\n    if (this.isBrowser) {\n      this.tags[0] = makeStyleTag()\n    } else {\n      // server side 'polyfill'. just enough behavior to be useful.\n      this.sheet = []\n    }\n    this.injected = true\n  }\n  speedy(bool) {\n    if (this.ctr !== 0) {\n      // cannot change speedy mode after inserting any rule to sheet. Either call speedy(${bool}) earlier in your app, or call flush() before speedy(${bool})\n      throw new Error(`cannot change speedy now`)\n    }\n    this.isSpeedy = !!bool\n  }\n  insert(rule, sourceMap) {\n    if (this.isBrowser) {\n      // this is the ultrafast version, works across browsers\n      if (this.isSpeedy) {\n        const tag = this.tags[this.tags.length - 1]\n        const sheet = sheetForTag(tag)\n\n        try {\n          sheet.insertRule(rule, sheet.cssRules.length)\n        } catch (e) {\n          if (process.env.NODE_ENV !== 'production') {\n            console.warn('illegal rule', rule) // eslint-disable-line no-console\n          }\n        }\n      } else {\n        const tag = makeStyleTag()\n        this.tags.push(tag)\n        tag.appendChild(document.createTextNode(rule + (sourceMap || '')))\n      }\n      this.ctr++\n      if (this.ctr % 65000 === 0) {\n        this.tags.push(makeStyleTag())\n      }\n    } else {\n      // enough 'spec compliance' to be able to extract the rules later\n      // in other words, just the rule\n      this.sheet.push(rule)\n    }\n  }\n  flush() {\n    if (this.isBrowser) {\n      this.tags.forEach(tag => tag.parentNode.removeChild(tag))\n      this.tags = []\n      this.ctr = 0\n      // todo - look for remnants in document.styleSheets\n    } else {\n      // simpler on server\n      this.sheet = []\n    }\n    this.injected = false\n  }\n}\n","import { hashString, Stylis, memoize, unitless } from 'emotion-utils'\nimport stylisRuleSheet from 'stylis-rule-sheet'\nimport StyleSheet from './sheet'\n\nexport const sheet = new StyleSheet()\n\n// ðŸš€\nsheet.inject()\nconst stylisOptions = { keyframe: false }\n\nif (process.env.NODE_ENV !== 'production') {\n  stylisOptions.compress = false\n}\n\nlet stylis = new Stylis(stylisOptions)\n\nconst externalStylisPlugins = []\n\nconst use = stylis.use\n\nfunction insertRule(rule) {\n  sheet.insert(rule, currentSourceMap)\n}\n\nconst insertionPlugin = stylisRuleSheet(insertRule)\n\nexport const useStylisPlugin = plugin => {\n  externalStylisPlugins.push(plugin)\n  use(null)(externalStylisPlugins)(insertionPlugin)\n}\n\nexport let registered = {}\n\nexport let inserted = {}\n\nlet currentSourceMap = ''\n\nstylis.use(insertionPlugin)\n\nfunction handleInterpolation(\n  interpolation: any,\n  couldBeSelectorInterpolation: boolean\n) {\n  if (interpolation == null) {\n    return ''\n  }\n\n  switch (typeof interpolation) {\n    case 'boolean':\n      return ''\n    case 'function':\n      return handleInterpolation.call(\n        this,\n        this === undefined\n          ? interpolation()\n          : interpolation(this.mergedProps, this.context),\n        couldBeSelectorInterpolation\n      )\n    case 'object':\n      return createStringFromObject.call(this, interpolation)\n    default:\n      const cached = registered[interpolation]\n      return couldBeSelectorInterpolation === false && cached !== undefined\n        ? cached\n        : interpolation\n  }\n}\n\nconst hyphenateRegex = /[A-Z]|^ms/g\n\nconst processStyleName = memoize(styleName =>\n  styleName.replace(hyphenateRegex, '-$&').toLowerCase()\n)\n\nconst processStyleValue = (key, value) => {\n  if (value === undefined || value === null || typeof value === 'boolean')\n    return ''\n\n  if (unitless[key] !== 1 && !isNaN(value) && value !== 0) {\n    return value + 'px'\n  }\n  return value\n}\n\nconst objectToStringCache = new WeakMap()\n\nfunction createStringFromObject(obj) {\n  if (objectToStringCache.has(obj)) {\n    return objectToStringCache.get(obj)\n  }\n  let string = ''\n\n  if (Array.isArray(obj)) {\n    obj.forEach(function(interpolation) {\n      string += handleInterpolation.call(this, interpolation, false)\n    }, this)\n  } else {\n    Object.keys(obj).forEach(function(key) {\n      if (typeof obj[key] !== 'object') {\n        if (registered[obj[key]] !== undefined) {\n          string += `${key}{${registered[obj[key]]}}`\n        } else {\n          string += `${processStyleName(key)}:${processStyleValue(\n            key,\n            obj[key]\n          )};`\n        }\n      } else {\n        string += `${key}{${handleInterpolation.call(this, obj[key], false)}}`\n      }\n    }, this)\n  }\n  objectToStringCache.set(obj, string)\n\n  return string\n}\n\nfunction isLastCharDot(string) {\n  return string.charCodeAt(string.length - 1) === 46 // .\n}\n\nlet hash\nlet name\n\nconst labelPattern = /label:\\s*([^\\s;\\n]+)\\s*[;\\n]/g\n\nfunction createStyles(strings, ...interpolations) {\n  let stringMode = true\n  let styles = ''\n  let identifierName = ''\n\n  if (strings == null || strings.raw === undefined) {\n    stringMode = false\n    styles = handleInterpolation.call(this, strings, false)\n  } else {\n    styles = strings[0]\n  }\n\n  interpolations.forEach(function(interpolation, i) {\n    styles += handleInterpolation.call(\n      this,\n      interpolation,\n      isLastCharDot(styles)\n    )\n    if (stringMode === true && strings[i + 1] !== undefined) {\n      styles += strings[i + 1]\n    }\n  }, this)\n  styles = styles.replace(labelPattern, (match, p1) => {\n    identifierName += `-${p1}`\n    return ''\n  })\n  hash = hashString(styles + identifierName)\n  name = hash + identifierName\n  return styles\n}\n\nif (process.env.NODE_ENV !== 'production') {\n  const sourceMapRegEx = /\\/\\*#\\ssourceMappingURL=data:application\\/json;\\S+\\s+\\*\\//\n  const oldStylis = stylis\n  stylis = (selector, styles) => {\n    const result = sourceMapRegEx.exec(styles)\n    currentSourceMap = result ? result[0] : ''\n    oldStylis(selector, styles)\n    currentSourceMap = ''\n  }\n}\n\nexport function css() {\n  const styles = createStyles.apply(this, arguments)\n  const selector = `css-${name}`\n\n  if (registered[selector] === undefined) {\n    registered[selector] = styles\n  }\n\n  if (inserted[hash] === undefined) {\n    stylis(`.${selector}`, styles)\n    inserted[hash] = true\n  }\n\n  return selector\n}\n\nexport function keyframes() {\n  const styles = createStyles.apply(this, arguments)\n  const animation = `animation-${name}`\n\n  if (inserted[hash] === undefined) {\n    stylis('', `@keyframes ${animation}{${styles}}`)\n    inserted[hash] = true\n  }\n  return animation\n}\n\nexport function injectGlobal() {\n  const styles = createStyles.apply(this, arguments)\n  if (inserted[hash] === undefined) {\n    stylis('', styles)\n    inserted[hash] = true\n  }\n}\n\nexport function fontFace(...args) {\n  const styles = createStyles(...args)\n  if (inserted[hash] === undefined) {\n    stylis('', `@font-face{${styles}}`)\n    inserted[hash] = true\n  }\n}\n\nexport function getRegisteredStyles(registeredStyles, classNames) {\n  let rawClassName = ''\n\n  classNames.split(' ').forEach(className => {\n    if (registered[className] !== undefined) {\n      registeredStyles.push(className)\n    } else {\n      rawClassName += `${className} `\n    }\n  })\n  return rawClassName\n}\n\nexport function merge(className, sourceMap) {\n  const registeredStyles = []\n\n  const rawClassName = getRegisteredStyles(registeredStyles, className)\n\n  if (registeredStyles.length < 2) {\n    return className\n  }\n  return rawClassName + css(registeredStyles, sourceMap)\n}\n\nfunction classnames() {\n  let len = arguments.length\n  let i = 0\n  let cls = ''\n  for (; i < len; i++) {\n    let arg = arguments[i]\n\n    if (arg == null) continue\n    let next = (cls && cls + ' ') || cls\n\n    switch (typeof arg) {\n      case 'boolean':\n        break\n      case 'function':\n        cls = next + classnames(arg())\n        break\n      case 'object': {\n        if (Array.isArray(arg)) {\n          cls = next + classnames.apply(null, arg)\n        } else {\n          for (const k in arg) {\n            if (arg[k]) {\n              cls && (cls += ' ')\n              cls += k\n            }\n          }\n        }\n        break\n      }\n      default: {\n        cls = next + arg\n      }\n    }\n  }\n  return cls\n}\n\nexport function cx(...classNames) {\n  return merge(classnames(...classNames))\n}\n\nexport function hydrate(ids) {\n  ids.forEach(id => {\n    inserted[id] = true\n  })\n}\n\nexport function flush() {\n  sheet.flush()\n  inserted = {}\n  registered = {}\n  sheet.inject()\n}\n"],"names":["sheetForTag","tag","sheet","i","document","styleSheets","length","ownerNode","makeStyleTag","createElement","type","setAttribute","appendChild","createTextNode","head","StyleSheet","isBrowser","window","isSpeedy","process","env","NODE_ENV","tags","ctr","inject","injected","Error","speedy","bool","insert","rule","sourceMap","insertRule","cssRules","e","warn","push","flush","forEach","parentNode","removeChild","stylisOptions","keyframe","compress","stylis","Stylis","externalStylisPlugins","use","currentSourceMap","insertionPlugin","stylisRuleSheet","useStylisPlugin","plugin","registered","inserted","handleInterpolation","interpolation","couldBeSelectorInterpolation","call","undefined","mergedProps","context","createStringFromObject","cached","hyphenateRegex","processStyleName","memoize","styleName","replace","toLowerCase","processStyleValue","key","value","unitless","isNaN","objectToStringCache","WeakMap","obj","has","get","string","Array","isArray","keys","set","isLastCharDot","charCodeAt","hash","name","labelPattern","createStyles","strings","stringMode","styles","identifierName","raw","interpolations","match","p1","hashString","sourceMapRegEx","oldStylis","selector","result","exec","css","apply","arguments","keyframes","animation","injectGlobal","fontFace","getRegisteredStyles","registeredStyles","classNames","rawClassName","split","className","merge","classnames","len","cls","arg","next","k","cx","hydrate","ids","id"],"mappings":"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"}