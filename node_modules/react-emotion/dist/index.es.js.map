{"version":3,"file":"index.es.js","sources":["../../emotion-theming/src/utils.js","../src/index.js"],"sourcesContent":["import PropTypes from 'prop-types'\n\nexport const channel = '__EMOTION_THEMING__'\n\nexport const contextTypes = {\n  [channel]: PropTypes.object\n}\n","/* global codegen */\nimport { createElement, Component } from 'react'\nimport { memoize } from 'emotion-utils'\nimport { css, getRegisteredStyles } from 'emotion'\nimport { channel, contextTypes } from '../../emotion-theming/src/utils'\n\nexport * from 'emotion'\n\nfunction setTheme(theme) {\n  this.setState({ theme })\n}\n\nfunction componentWillMount() {\n  if (this.context[channel] !== undefined) {\n    this.unsubscribe = this.context[channel].subscribe(setTheme.bind(this))\n  }\n}\nfunction componentWillUnmount() {\n  if (this.unsubscribe !== undefined) {\n    this.context[channel].unsubscribe(this.unsubscribe)\n  }\n}\n\nconst reactPropsRegex = codegen.require('./props')\nconst testOmitPropsOnStringTag = memoize(key => reactPropsRegex.test(key))\nconst testOmitPropsOnComponent = key => key !== 'theme' && key !== 'innerRef'\nconst testAlwaysTrue = () => true\n\nconst omitAssign = function(testFn, target) {\n  let i = 2\n  let length = arguments.length\n  for (; i < length; i++) {\n    let source = arguments[i]\n    let key\n    for (key in source) {\n      if (testFn(key)) {\n        target[key] = source[key]\n      }\n    }\n  }\n  return target\n}\n\nconst createStyled = (tag, options: { e: string, label: string }) => {\n  if (process.env.NODE_ENV !== 'production') {\n    if (tag === undefined) {\n      throw new Error(\n        'You are trying to create a styled element with an undefined component.\\nYou may have forgotten to import it.'\n      )\n    }\n  }\n  let staticClassName\n  let identifierName\n  if (options !== undefined) {\n    staticClassName = options.e\n    identifierName = options.label\n  }\n  const isReal = tag.__emotion_real === tag\n  const baseTag =\n    staticClassName === undefined ? (isReal && tag.__emotion_base) || tag : tag\n\n  const omitFn =\n    typeof baseTag === 'string' &&\n    baseTag.charAt(0) === baseTag.charAt(0).toLowerCase()\n      ? testOmitPropsOnStringTag\n      : testOmitPropsOnComponent\n\n  return (strings, ...interpolations) => {\n    let styles = (isReal && tag.__emotion_styles) || []\n    if (identifierName !== undefined) {\n      styles = styles.concat(`label:${identifierName};`)\n    }\n    if (staticClassName === undefined) {\n      if (strings == null || strings.raw === undefined) {\n        styles = styles.concat(strings, interpolations)\n      } else {\n        styles = interpolations.reduce(\n          (array, interp, i) => array.concat(interp, strings[i + 1]),\n          styles.concat(strings[0])\n        )\n      }\n    }\n\n    class Styled extends Component {\n      render() {\n        const { props, state } = this\n        this.mergedProps = omitAssign(testAlwaysTrue, {}, props, {\n          theme: (state !== null && state.theme) || props.theme || {}\n        })\n\n        let className = ''\n        let classInterpolations = []\n\n        if (props.className) {\n          if (staticClassName === undefined) {\n            className += getRegisteredStyles(\n              classInterpolations,\n              props.className\n            )\n          } else {\n            className += `${props.className} `\n          }\n        }\n        if (staticClassName === undefined) {\n          className += css.apply(this, styles.concat(classInterpolations))\n        } else {\n          className += staticClassName\n        }\n\n        return createElement(\n          baseTag,\n          omitAssign(omitFn, {}, props, { className, ref: props.innerRef })\n        )\n      }\n    }\n    Styled.prototype.componentWillMount = componentWillMount\n    Styled.prototype.componentWillUnmount = componentWillUnmount\n    Styled.displayName =\n      identifierName !== undefined\n        ? identifierName\n        : `Styled(${typeof baseTag === 'string'\n            ? baseTag\n            : baseTag.displayName || baseTag.name || 'Component'})`\n\n    Styled.contextTypes = contextTypes\n    Styled.__emotion_styles = styles\n    Styled.__emotion_base = baseTag\n    Styled.__emotion_real = Styled\n\n    Styled.withComponent = nextTag => {\n      return createStyled(nextTag, options)(styles)\n    }\n\n    return Styled\n  }\n}\n\nexport default createStyled\n"],"names":["channel","contextTypes","PropTypes","object","setTheme","theme","setState","componentWillMount","context","undefined","unsubscribe","subscribe","bind","componentWillUnmount","reactPropsRegex","testOmitPropsOnStringTag","memoize","test","key","testOmitPropsOnComponent","testAlwaysTrue","omitAssign","testFn","target","i","length","arguments","source","createStyled","tag","options","process","env","NODE_ENV","Error","staticClassName","identifierName","e","label","isReal","__emotion_real","baseTag","__emotion_base","omitFn","charAt","toLowerCase","strings","interpolations","styles","__emotion_styles","concat","raw","reduce","array","interp","Styled","render","props","state","mergedProps","className","classInterpolations","getRegisteredStyles","css","apply","createElement","ref","innerRef","Component","prototype","displayName","name","withComponent","nextTag"],"mappings":"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"}